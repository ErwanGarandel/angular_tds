<!DOCTYPE html>
<html lang="en" ng-app="myApp">
<head>
    <base href = "http://angular.kobject.net/">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../css/css.css" />
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <title>Index</title>
    <div class="">
    <h3> Ex 1 : Note Application</h3>
    </div>
    <style type="text/css">
        body {background:#eee}
        #pge {display:block;width:400px;margin:0 auto;padding:7px;background:#ddd}
        legend {font-size:x-large;font-weight:bold;}
        p {margin:3px;text-align:right;}
        textarea {display:block;width:360px;overflow:hidden;margin:0 auto;}
        .bold {font-weight:bold}
    </style>

    </head>
    <body>
    <div id="pge">
  <fieldset>
      <p id="cnt"></p>
    <legend>Note :</legend>
    <textarea type="text" id="txa" placeholder="Ecrire something" cols="100" rows="5" autofocus onkeyup="reste(this.value);"></textarea>
        <br />
        <span id="caracteres">100</span> caractères restants

        <div>
            <input class="btn btn-primary" type="button" value="Enregistrer">
        </div>
        <div>
            <input class="btn btn-primary" type="button" value ="Effacer" onclick="effacer()">
        </div>
    </div>

    <script type="text/javascript">
        var maxChr=100; // limite max fixée
        function $(i){return document.getElementById(i)}
        function red(nbrChr){return Math.round(255*Math.pow(0.977,maxChr-nbrChr))}
        function countChr()
        {
            var len=$('txa').value.length;
            if (maxChr<len)
            {
                $('txa').value=$('txa').value.substr(0,maxChr);
                len=maxChr
            }
            $('cnt').innerHTML='<span style="color:rgb('+red(len)+',0,0)">'+len+' caractère'+(1<len?'s':'')+'</span> / '+maxChr;
            if (len<maxChr)
                $('cnt').className="";
            else
                $('cnt').className="bold";
        };

        (function()
        {
            $('txa').onkeyup=countChr;
            countChr();
        })();
    </script>

    <script type="text/javascript">
        <!--
        function effacer()
        {
            document.getElementById("txa").value="";
        }

        //-->
    </script>


   <!-- <script type= text/javascript>
        // textarea est la référence du TEXTAREA à contrôler, max en est la valeur maximal, count est la référence
        // du champs texte de contrôle où s'affichera le nombre de caractère en cour
    function verif_press(textarea, max, count) // vérifie que le nombre maxi n'a pas été atteint pendant que l'utilisateur reste appuyé sur la touche
    {
        if (textarea.value.length > max - 1) { //s'il dépasse la taille requise, on sort
            return false;
        }
        else { // sinon
            count.value = textarea.value.length + 1; // on met à jour le champs de contrôle.
            return true;
        }
    }

    // textarea est la référence du TEXTAREA à contrôler, max en est la valeur maximal, pour cette fonction count n'est pas inclu
    // car lorsqu'elle est appellée, le nombre de caractère a déja été inscrit lors de l'évenement "onkeyup"

    function verif_change(textarea, max) // vérifie que le nombre maxi n'a pas été atteint lorsque l'utilisateur sort du champs
    {
        if (textarea.value.length > max) { // s'il dépasse la taille requise, on prévient et on sort
            alert('Vous ne pouvez rentrer que ' + max + ' caractères maximum pour ce champs');
            return false;
        }
        else return true; // sinon, on continu
    }

    // textarea est la référence du TEXTAREA à contrôler, count est la référence
    // du champs texte de contrôle où s'affichera le nombre de caractère en cour. Cette fonction est appelée lors de l'évenement "onkeyup"
    function show_nb_car(textarea, count) {
        count.value = textarea.value.length;
        return true;
    }

    </script> -->

</body>
</html>